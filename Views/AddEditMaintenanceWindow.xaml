<Window x:Class="FleetManager.Views.AddEditMaintenanceWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Entretien" Height="700" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">

    <Window.Resources>
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
            <Setter Property="Foreground" Value="#333"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderBrush" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Height" Value="35"/>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Height" Value="35"/>
        </Style>

        <Style TargetType="DatePicker">
            <Setter Property="Height" Value="35"/>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="10" Margin="20" Padding="30">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Titre -->
            <TextBlock Grid.Row="0" 
                       Text="{Binding WindowTitle}" 
                       FontSize="22" FontWeight="Bold" 
                       Foreground="#1976D2" 
                       Margin="0,0,0,20"/>

            <!-- Formulaire -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- VÃ©hicule * -->
                    <TextBlock Text="VÃ©hicule *"/>
                    <ComboBox ItemsSource="{Binding Vehicles}"
                              SelectedItem="{Binding SelectedVehicle}"
                              DisplayMemberPath="DisplayName"
                              IsEnabled="{Binding IsEditMode, Converter={StaticResource InverseBoolConverter}}"/>

                    <!-- Date * -->
                    <TextBlock Text="Date d'entretien *"/>
                    <DatePicker SelectedDate="{Binding MaintenanceDate}" 
                                FirstDayOfWeek="Monday"/>

                    <!-- Type * -->
                    <TextBlock Text="Type d'entretien *"/>
                    <ComboBox ItemsSource="{Binding MaintenanceTypes}"
                              SelectedItem="{Binding SelectedMaintenanceType}"/>

                    <!-- KilomÃ©trage * -->
                    <TextBlock Text="KilomÃ©trage (km) *"/>
                    <TextBox Text="{Binding Mileage, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- CoÃ»t * -->
                    <TextBlock Text="CoÃ»t (â‚¬) *"/>
                    <TextBox Text="{Binding Cost, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Description * -->
                    <TextBlock Text="Description *"/>
                    <TextBox Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                             Height="80" TextWrapping="Wrap" 
                             AcceptsReturn="True" 
                             VerticalScrollBarVisibility="Auto"/>

                    <!-- Garage -->
                    <TextBlock Text="Garage"/>
                    <TextBox Text="{Binding Garage, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- Technicien -->
                    <TextBlock Text="Technicien"/>
                    <TextBox Text="{Binding TechnicianName, UpdateSourceTrigger=PropertyChanged}"/>

                    <!-- PiÃ¨ces -->
                    <TextBlock Text="PiÃ¨ces remplacÃ©es"/>
                    <TextBox Text="{Binding Parts, UpdateSourceTrigger=PropertyChanged}"
                             Height="60" TextWrapping="Wrap" 
                             AcceptsReturn="True" 
                             VerticalScrollBarVisibility="Auto"/>

                    <!-- Statut -->
                    <TextBlock Text="Statut"/>
                    <ComboBox SelectedItem="{Binding Status}">
                        <ComboBoxItem Content="TerminÃ©e"/>
                        <ComboBoxItem Content="En cours"/>
                        <ComboBoxItem Content="PlanifiÃ©e"/>
                    </ComboBox>

                    <!-- Prochain entretien -->
                    <Border Background="#E3F2FD" CornerRadius="8" Padding="15" Margin="0,20,0,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ“… Prochain entretien" FontWeight="Bold" 
                                       Foreground="#1976D2" Margin="0,0,0,10"/>
                            
                            <TextBlock Text="Date prÃ©vue"/>
                            <DatePicker SelectedDate="{Binding NextMaintenanceDate}" 
                                        FirstDayOfWeek="Monday"/>

                            <TextBlock Text="KilomÃ©trage prÃ©vu"/>
                            <TextBox Text="{Binding NextMaintenanceMileage, UpdateSourceTrigger=PropertyChanged}"/>
                        </StackPanel>
                    </Border>

                    <!-- Notes -->
                    <TextBlock Text="Notes supplÃ©mentaires"/>
                    <TextBox Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"
                             Height="80" TextWrapping="Wrap" 
                             AcceptsReturn="True" 
                             VerticalScrollBarVisibility="Auto"/>
                </StackPanel>
            </ScrollViewer>

            <!-- Boutons -->
            <Border Grid.Row="2" Padding="0,20,0,0" BorderThickness="0,1,0,0" BorderBrush="#EEE" Margin="0,20,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="ðŸ’¾ Enregistrer" Width="150" Height="45"
                            Command="{Binding SaveCommand}"
                            Style="{StaticResource PrimaryButton}"
                            Margin="0,0,10,0"/>
                    <Button Content="Annuler" Width="120" Height="45"
                            IsCancel="True"
                            Click="CancelButton_Click"
                            Style="{StaticResource SecondaryButton}"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>


